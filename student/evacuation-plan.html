<!DOCTYPE html> 
<html lang="en"> 
<head> 
<meta charset="UTF-8"> 
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<title>Jeevansetu - Evacuation Plan</title> 
<link rel="stylesheet" 
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> 
<style> 
* { 
margin: 0; 
padding: 0; 
box-sizing: border-box; 
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
} 
:root { --primary: #1a73e8; --secondary: #0b4fa3; --accent: #ff6b35; --light: #f5f7f9; --dark: #2c3e50; --success: #28a745; --danger: #dc3545; --warning: #ffc107; --info: #17a2b8; --gray: #6c757d; --light-gray: #e9ecef; --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); --transition: all 0.3s ease; 
} 
body { 
background-color: #f0f2f5; 
color: #333; 
display: flex; 
min-height: 100vh; 
line-height: 1.6; 
} 
/* Sidebar Styles */ 
.sidebar { 
width: 250px; 
 background: linear-gradient(to bottom, var(--primary), var(--secondary)); 
 color: white; 
 height: 100vh; 
 position: fixed; 
 overflow-y: auto; 
 transition: var(--transition); 
 z-index: 1000; 
 } 
 
 .logo { 
 padding: 20px 15px; 
 border-bottom: 1px solid rgba(255, 255, 255, 0.1); 
 } 
 
 .logo h1 { 
 font-size: 1.5rem; 
 display: flex; 
 align-items: center; 
 } 
 
 .logo i { 
 margin-right: 10px; 
 font-size: 1.8rem; 
 } 
 
 .logo span span { 
 color: var(--accent); 
 font-weight: bold; 
 } 
 
 .nav-menu { 
 list-style: none; 
 padding: 15px 0; 
 } 
 
 .nav-item { 
 margin: 5px 0; 
 } 
 
 .nav-link { 
 display: flex; 
 align-items: center; 
 padding: 12px 20px; 
 color: rgba(255, 255, 255, 0.8); 
text-decoration: none; 
transition: var(--transition); 
} 
.nav-link:hover, .nav-link.active { 
background-color: rgba(255, 255, 255, 0.1); 
color: white; 
border-left: 4px solid var(--accent); 
} 
.nav-link i { 
margin-right: 10px; 
font-size: 1.2rem; 
width: 24px; 
text-align: center; 
} 
.user-section { 
padding: 15px 20px; 
border-top: 1px solid rgba(255, 255, 255, 0.1); 
margin-top: auto; 
display: flex; 
align-items: center; 
} 
.user-avatar { 
width: 40px; 
height: 40px; 
border-radius: 50%; 
background-color: var(--accent); 
display: flex; 
align-items: center; 
justify-content: center; 
margin-right: 10px; 
font-weight: bold; 
} 
.user-details { 
flex: 1; 
} 
.user-name { 
font-weight: 600; 
} 
 
 .user-role { 
 font-size: 0.8rem; 
 opacity: 0.8; 
 } 
 
 /* Main Content Styles */ 
 .main-content { 
 flex: 1; 
 margin-left: 250px; 
 padding: 20px; 
 display: flex; 
 flex-direction: column; 
 min-height: 100vh; 
 } 
 
 .header { 
 display: flex; 
 justify-content: space-between; 
 align-items: center; 
 padding: 20px 0; 
 border-bottom: 1px solid var(--light-gray); 
 margin-bottom: 20px; 
 } 
 
 .welcome h2 { 
 color: var(--dark); 
 margin-bottom: 5px; 
 } 
 
 .welcome p { 
 color: var(--gray); 
 } 
 
 .user-info { 
 display: flex; 
 align-items: center; 
 } 
 
 .user-img { 
 width: 40px; 
 height: 40px; 
 border-radius: 50%; 
 background-color: var(--primary); 
 color: white; 
 display: flex; 
 align-items: center; 
 justify-content: center; 
 font-weight: bold; 
 } 
 
 .page-title { 
 display: flex; 
 justify-content: space-between; 
 align-items: center; 
 margin-bottom: 20px; 
 } 
 
 .page-title h2 { 
 color: var(--dark); 
 margin-bottom: 5px; 
 } 
 
 .page-title p { 
 color: var(--gray); 
 } 
 
 .btn { 
 padding: 10px 20px; 
 border: none; 
 border-radius: 5px; 
 cursor: pointer; 
 font-weight: 600; 
 display: inline-flex; 
 align-items: center; 
 transition: var(--transition); 
 } 
 
 .btn i { 
 margin-right: 8px; 
 } 
 
 .btn-primary { 
 background-color: var(--primary); 
 color: white; 
 } 
 
 .btn-primary:hover { 
background-color: var(--secondary); 
} 
.btn-outline { 
background-color: transparent; 
border: 1px solid var(--primary); 
color: var(--primary); 
} 
.btn-outline:hover { 
background-color: var(--primary); 
color: white; 
} 
/* Selection Panel Styles */ 
.selection-panel { 
background-color: white; 
border-radius: 10px; 
padding: 20px; 
box-shadow: var(--card-shadow); 
margin-bottom: 20px; 
} 
.section-header { 
margin-bottom: 20px; 
} 
.section-title { 
color: var(--dark); 
margin-bottom: 5px; 
} 
.section-subtitle { 
color: var(--gray); 
font-size: 0.9rem; 
} 
.building-tabs { 
display: flex; 
flex-wrap: wrap; 
gap: 10px; 
margin-bottom: 20px; 
} 
.building-tab { 
flex: 1; 
min-width: 120px; 
background-color: var(--light); 
border-radius: 8px; 
padding: 15px; 
text-align: center; 
cursor: pointer; 
transition: var(--transition); 
display: flex; 
flex-direction: column; 
align-items: center; 
} 
.building-tab:hover { 
background-color: #e3e9f1; 
} 
.building-tab.active { 
background-color: var(--primary); 
color: white; 
} 
.building-tab i { 
font-size: 1.5rem; 
margin-bottom: 8px; 
} 
.floor-selector { 
display: flex; 
gap: 10px; 
margin-bottom: 20px; 
flex-wrap: wrap; 
} 
.floor-btn { 
padding: 10px 15px; 
background-color: var(--light); 
border: none; 
border-radius: 5px; 
cursor: pointer; 
transition: var(--transition); 
} 
 .floor-btn:hover { 
 background-color: #e3e9f1; 
 } 
 
 .floor-btn.active { 
 background-color: var(--primary); 
 color: white; 
 } 
 
 .legend { 
 display: flex; 
 flex-wrap: wrap; 
 gap: 15px; 
 margin-top: 20px; 
 padding-top: 20px; 
 border-top: 1px solid var(--light-gray); 
 } 
 
 .legend-item { 
 display: flex; 
 align-items: center; 
 gap: 8px; 
 } 
 
 .legend-color { 
 width: 20px; 
 height: 20px; 
 border-radius: 3px; 
 } 
 
 .legend-route { 
 background-color: var(--danger); 
 } 
 
 .legend-exit { 
 background-color: var(--success); 
 } 
 
 .legend-room { 
 background-color: var(--primary); 
 } 
 
 .legend-selected { 
 background-color: var(--accent); 
} 
.legend-path { 
background-color: #ffc107; 
} 
/* Map Container Styles */ 
.map-container { 
background-color: white; 
border-radius: 10px; 
box-shadow: var(--card-shadow); 
margin-bottom: 20px; 
overflow: hidden; 
} 
.map-header { 
display: flex; 
justify-content: space-between; 
align-items: center; 
padding: 15px 20px; 
border-bottom: 1px solid var(--light-gray); 
} 
.map-content { 
position: relative; 
height: 600px; 
overflow: hidden; 
background-color: #e9f2fc; 
} 
.floor-image { 
width: 100%; 
height: 100%; 
object-fit: cover; 
display: none; 
} 
.floor-image.active { 
display: block; 
} 
.marker-container { 
position: absolute; 
top: 0; 
left: 0; 
width: 100%; 
height: 100%; 
pointer-events: none; 
} 
.exit-marker, .room-marker { 
position: absolute; 
width: 30px; 
height: 30px; 
border-radius: 50%; 
display: flex; 
align-items: center; 
justify-content: center; 
font-weight: bold; 
cursor: pointer; 
pointer-events: all; 
transform: translate(-50%, -50%); 
z-index: 10; 
transition: var(--transition); 
} 
.exit-marker { 
background-color: var(--success); 
color: white; 
border: 3px solid white; 
box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); 
} 
.room-marker { 
background-color: var(--primary); 
color: white; 
border: 3px solid white; 
box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); 
width: 20px; 
height: 20px; 
} 
.room-marker.selected { 
background-color: var(--accent); 
transform: translate(-50%, -50%) scale(1.3); 
z-index: 20; 
} 
.location-info { 
position: absolute; 
background-color: white; 
padding: 10px 15px; 
border-radius: 5px; 
box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2); 
z-index: 30; 
display: none; 
max-width: 200px; 
font-size: 0.9rem; 
}

/* Evacuation Path Styles */
.evacuation-path {
    pointer-events: none !important;
    z-index: 100 !important;
}

.evacuation-path path {
    filter: drop-shadow(0 0 3px rgba(255, 193, 7, 0.8));
} 
/* Instructions Panel Styles */ 
.instructions-panel { 
background-color: white; 
border-radius: 10px; 
padding: 20px; 
box-shadow: var(--card-shadow); 
margin-bottom: 20px; 
} 
.instruction-item { 
display: flex; 
margin-bottom: 20px; 
padding-bottom: 20px; 
border-bottom: 1px solid var(--light-gray); 
} 
.instruction-item:last-child { 
margin-bottom: 0; 
padding-bottom: 0; 
border-bottom: none; 
} 
.instruction-icon { 
width: 50px; 
height: 50px; 
background-color: var(--light); 
border-radius: 50%; 
display: flex; 
align-items: center; 
justify-content: center; 
margin-right: 15px; 
flex-shrink: 0; 
} 
.instruction-icon i { 
color: var(--primary); 
font-size: 1.2rem; 
} 
.instruction-content h4 { 
color: var(--dark); 
margin-bottom: 5px; 
} 
.instruction-content p { 
color: var(--gray); 
font-size: 0.9rem; 
} 
/* Footer Styles */ 
.footer { 
text-align: center; 
padding: 20px; 
color: var(--gray); 
font-size: 0.9rem; 
margin-top: auto; 
} 
/* Responsive Styles */ 
@media (max-width: 768px) { 
.sidebar { 
width: 70px; 
} 
.sidebar .logo span, .sidebar .nav-link span, .sidebar .user-details { 
display: none; 
} 
.sidebar .logo { 
padding: 20px 10px; 
text-align: center; 
} 
.sidebar .logo h1 { 
justify-content: center; 
} 
  
 .main-content { 
 margin-left: 70px; 
 } 
  
 .building-tabs { 
 flex-direction: column; 
 } 
  
 .floor-selector { 
 justify-content: center; 
 } 
 } 
 
 @media (max-width: 480px) { 
 .main-content { 
 padding: 10px; 
 } 
  
 .header { 
 flex-direction: column; 
 align-items: flex-start; 
 } 
  
 .user-info { 
 margin-top: 10px; 
 } 
  
 .page-title { 
 flex-direction: column; 
 align-items: flex-start; 
 } 
  
 .page-title .btn { 
 margin-top: 10px; 
 } 
  
 .map-header { 
 flex-direction: column; 
 align-items: flex-start; 
 } 
  
 .map-header .btn { 
 margin-top: 10px; 
} 
} 
</style> 
</head> 
<body> 
<!-- Sidebar --> 
<aside class="sidebar"> 
<div class="logo"> 
<h1><i class="fas fa-shield-alt"></i> <span>Jeevan<span>Setu</span></span></h1> 
</div> 
<ul class="nav-menu"> 
<li class="nav-item"> 
<a href="dashboard-student.html" class="nav-link"> 
<i class="fas fa-home"></i> 
<span>Dashboard</span> 
</a> 
</li> 
<li class="nav-item"> 
<a href="education-modules.html" class="nav-link"> 
<i class="fas fa-book"></i> 
<span>Education Modules</span> 
</a> 
</li> 
<li class="nav-item"> 
<a href="sandbox-simulator.html" class="nav-link"> 
<i class="fas fa-gamepad"></i> 
<span>Sandbox Simulator</span> 
</a> 
</li> 
<li class="nav-item"> 
<a href="emergency_contacts.html" class="nav-link"> 
<i class="fas fa-phone-alt"></i> 
<span>Emergency Contacts</span> 
</a> 
</li> 
<li class="nav-item"> 
<a href="dos&donts.html" class="nav-link"> 
<i class="fas fa-list-check"></i> 
<span>Do's & Don'ts</span> 
</a> 
</li> 
<li class="nav-item"> 
<a href="drill_schedule.html" class="nav-link"> 
<i class="fas fa-calendar-alt"></i> 
<span>Drill Schedule</span> 
</a> 
</li> 
<li class="nav-item"> 
<a href="evacuation-plan.html" class="nav-link active"> 
<i class="fas fa-map-marked-alt"></i> 
<span>Disaster Map</span> 
</a> 
</li> 
<li class="nav-item"> 
<a href="chatbot.html" class="nav-link"> 
<i class="fas fa-robot"></i> 
<span>AI Helper</span> 
</a> 
</li> 
<li class="nav-item"> 
<a href="gamified-learning.html" class="nav-link"> 
<i class="fas fa-trophy"></i> 
<span>Gamified Learning</span> 
</a> 
</li> 
<li class="nav-item"> 
<a href="settings.html" class="nav-link"> 
<i class="fas fa-cog"></i> 
<span>Settings</span> 
</a> 
</li> 
</ul> 
<div class="user-section"> 
<div class="user-avatar">P</div> 
<div class="user-details"> 
<div class="user-name">Priya Sharma</div> 
<div class="user-role">Student</div> 
</div> 
</div> 
</aside> 
<!-- Main Content --> 
<main class="main-content"> 
<div class="header"> 
<div class="welcome"> 
<h2>Welcome back, Priya!</h2> 
<p>View evacuation routes for CSE, Admin, IT, and Hostel blocks</p> 
</div> 
<div class="user-info"> 
<div class="user-img">P</div> 
</div> 
</div> 
<div class="page-title"> 
<div> 
<h2>Disaster Map - Evacuation Plan</h2> 
<p>Select a building and floor to view evacuation routes</p> 
</div> 
<button class="btn btn-primary"> 
<i class="fas fa-download"></i> Download Plan 
</button> 
</div> 
<div class="selection-panel"> 
<div class="section-header"> 
<h3 class="section-title">Select Building & Floor</h3> 
<p class="section-subtitle">Choose one of the four main blocks and a floor level</p> 
</div> 
<div class="building-tabs"> 
<div class="building-tab active" data-building="cse"> 
<i class="fas fa-laptop-code"></i> 
<span>CSE Block</span> 
</div> 
<div class="building-tab" data-building="admin"> 
<i class="fas fa-user-tie"></i> 
<span>Admin Block</span> 
</div> 
<div class="building-tab" data-building="it"> 
<i class="fas fa-server"></i> 
<span>IT Block</span> 
</div> 
<div class="building-tab" data-building="hostel"> 
<i class="fas fa-bed"></i> 
<span>Hostel Block</span> 
</div> 
</div> 
<div class="floor-selector"> 
<button class="floor-btn active" data-floor="ground">Ground Floor</button> 
<button class="floor-btn" data-floor="first">First Floor</button> 
<button class="floor-btn" data-floor="second">Second Floor</button> 
<button class="floor-btn" data-floor="third">Third Floor</button> 
</div> 
<button class="btn btn-primary" id="showRoute"> 
<i class="fas fa-route"></i> Show Evacuation Route 
</button> 
<div class="legend"> 
<div class="legend-item"><div class="legend-color legend-route"></div><span>Evacuation 
Route</span></div> 
<div class="legend-item"><div class="legend-color legend-exit"></div><span>Emergency 
Exit</span></div> 
<div class="legend-item"><div class="legend-color 
legend-room"></div><span>Room/Area</span></div> 
<div class="legend-item"><div class="legend-color legend-selected"></div><span>Your 
Location</span></div> 
<div class="legend-item"><div class="legend-color legend-path"></div><span>Calculated 
Path</span></div> 
</div> 
</div> 
<div class="map-container"> 
<div class="map-header"> 
<h3 class="section-title" id="mapTitle">CSE Block - Ground Floor Evacuation Map</h3> 
<button class="btn btn-outline" id="resetMap"> 
<i class="fas fa-sync-alt"></i> Reset View 
</button> 
</div> 
<div class="map-content"> 
<!-- Floor images --> 
<img src="evacuation_plan/images/cse_ground.png" 
alt="CSE Ground Floor" class="floor-image active" id="cse-ground"> 
<img src="evacuation_plan/images/cse_first.png" alt="CSE 
First Floor" class="floor-image" id="cse-first"> 
<img src="evacuation_plan/images/cse_second.png" 
alt="CSE Second Floor" class="floor-image" id="cse-second"> 
<img src="https://via.placeholder.com/800x500/4a90e2/ffffff?text=CSE+Third+Floor" alt="CSE 
Third Floor" class="floor-image" id="cse-third"> 
<img src="evacuation_plan/images/admin_ground_floor.png" 
alt="Admin Ground Floor" class="floor-image" id="admin-ground"> 
<img src="evacuation_plan/images/admin_first_floor.png" 
alt="Admin First Floor" class="floor-image" id="admin-first"> 
<img src="https://via.placeholder.com/800x500/50c878/ffffff?text=Admin+Second+Floor" 
alt="Admin Second Floor" class="floor-image" id="admin-second"> 
<img src="https://via.placeholder.com/800x500/50c878/ffffff?text=Admin+Third+Floor" 
alt="Admin Third Floor" class="floor-image" id="admin-third"> 
<img src="https://via.placeholder.com/800x500/ff6b35/ffffff?text=IT+Ground+Floor" alt="IT 
Ground Floor" class="floor-image" id="it-ground"> 
<img src="https://via.placeholder.com/800x500/ff6b35/ffffff?text=IT+First+Floor" alt="IT First 
Floor" class="floor-image" id="it-first"> 
<img src="https://via.placeholder.com/800x500/ff6b35/ffffff?text=IT+Second+Floor" alt="IT 
Second Floor" class="floor-image" id="it-second"> 
<img src="https://via.placeholder.com/800x500/ff6b35/ffffff?text=IT+Third+Floor" alt="IT Third 
Floor" class="floor-image" id="it-third"> 
<img src="https://via.placeholder.com/800x500/8e44ad/ffffff?text=Hostel+Ground+Floor" 
alt="Hostel Ground Floor" class="floor-image" id="hostel-ground"> 
<img src="https://via.placeholder.com/800x500/8e44ad/ffffff?text=Hostel+First+Floor" 
alt="Hostel First Floor" class="floor-image" id="hostel-first"> 
<img src="https://via.placeholder.com/800x500/8e44ad/ffffff?text=Hostel+Second+Floor" 
alt="Hostel Second Floor" class="floor-image" id="hostel-second"> 
<img src="https://via.placeholder.com/800x500/8e44ad/ffffff?text=Hostel+Third+Floor" 
alt="Hostel Third Floor" class="floor-image" id="hostel-third"> 
<!-- Exit markers --> 
<div class="exit-marker" data-room="Exit 1" style="top: 15%; left: 10%;" data-x="10" 
data-y="15">1</div> 
<div class="exit-marker" data-room="Exit 2" style="top: 15%; left: 90%;" data-x="90" 
data-y="15">2</div> 
<div class="exit-marker" data-room="Exit 3" style="top: 85%; left: 50%;" data-x="50" 
data-y="85">3</div> 
<!-- Room markers --> 
<div class="room-marker" data-room="Lab 101" style="top: 30%; left: 25%;" data-x="25" 
data-y="30"></div> 
<div class="room-marker" data-room="Faculty Room" style="top: 50%; left: 40%;" data-x="40" 
data-y="50"></div> 
<div class="room-marker" data-room="Classroom" style="top: 70%; left: 25%;" data-x="25" 
data-y="70"></div> 
<div class="room-marker" data-room="Server Room" style="top: 40%; left: 70%;" data-x="70" 
data-y="40"></div> 
<div class="room-marker" data-room="Common Area" style="top: 70%; left: 60%;" data-x="60" 
data-y="70"></div> 
<div class="location-info" id="locationInfo"></div> 
</div> 
</div> 
<div class="instructions-panel"> 
<div class="section-header"> 
<h3 class="section-title">Evacuation Instructions</h3> 
<p class="section-subtitle">Important guidelines to follow during evacuation</p> 
</div> 
<div class="instruction-item"> 
<div class="instruction-icon"> 
<i class="fas fa-route"></i> 
</div> 
<div class="instruction-content"> 
<h4>Follow Marked Routes</h4> 
<p>Always follow the red-marked evacuation routes to the nearest emergency exit. Do not use 
elevators during evacuation.</p> 
</div> 
</div> 
<div class="instruction-item"> 
<div class="instruction-icon"> 
<i class="fas fa-users"></i> 
</div> 
<div class="instruction-content"> 
<h4>Assemble at Designated Points</h4> 
<p>After evacuation, proceed to the designated assembly points and avoid blocking 
emergency vehicle access routes.</p> 
</div> 
</div> 
<div class="instruction-item"> 
<div class="instruction-icon"> 
<i class="fas fa-first-aid"></i> 
</div> 
<div class="instruction-content"> 
<h4>Assist Those in Need</h4> 
<p>Help individuals with disabilities or mobility issues to evacuate safely. Report to emergency 
personnel if someone needs assistance.</p> 
</div> 
</div> 
<div class="instruction-item"> 
<div class="instruction-icon"> 
 <i class="fas fa-ban"></i> 
 </div> 
 <div class="instruction-content"> 
 <h4>Avoid Dangerous Actions</h4> 
 <p>Do not re-enter the building until declared safe by authorities. Do not use open flames and 
avoid electrical switches if there is a gas leak suspicion.</p> 
 </div> 
 </div> 
 </div> 
  
 <div class="footer"> 
 <p>Jeevansetu Â© 2025 | IGDTUW Evacuation Plan</p> 
 </div> 
 </main> 
 
 <script> 
 document.addEventListener('DOMContentLoaded', function() { 
 const buildingTabs = document.querySelectorAll('.building-tab'); 
 const floorBtns = document.querySelectorAll('.floor-btn'); 
 const showRouteBtn = document.getElementById('showRoute'); 
 const resetMapBtn = document.getElementById('resetMap'); 
 const mapTitle = document.getElementById('mapTitle'); 
 const floorImages = document.querySelectorAll('.floor-image'); 
 const roomMarkers = document.querySelectorAll('.room-marker'); 
 const exitMarkers = document.querySelectorAll('.exit-marker'); 
 const locationInfo = document.getElementById('locationInfo'); 
  
 let selectedBuilding = 'cse'; 
 let selectedFloor = 'ground'; 
 let selectedMarker = null; 
 let selectedExit = null; 
 let currentPath = []; 
  
 // Building tab selection 
 buildingTabs.forEach(tab => { 
 tab.addEventListener('click', function() { 
 buildingTabs.forEach(t => t.classList.remove('active')); 
 this.classList.add('active'); 
 selectedBuilding = this.getAttribute('data-building'); 
 updateMap(); 
 }); 
 }); 
  
 // Floor button selection 
floorBtns.forEach(btn => { 
btn.addEventListener('click', function() { 
floorBtns.forEach(b => b.classList.remove('active')); 
this.classList.add('active'); 
selectedFloor = this.getAttribute('data-floor'); 
updateMap(); 
}); 
}); 

// Update map based on selection 
function updateMap() {
    // Hide all floor images
    floorImages.forEach(img => img.classList.remove('active'));
    
    // Show current floor image
    const currentImageId = selectedBuilding + '-' + selectedFloor;
    const currentImage = document.getElementById(currentImageId);
    if (currentImage) {
        currentImage.classList.add('active');
    }
    
    // Update map title
    const buildingNames = {
        'cse': 'CSE Block',
        'admin': 'Admin Block',
        'it': 'IT Block',
        'hostel': 'Hostel Block'
    };
    
    const floorNames = {
        'ground': 'Ground Floor',
        'first': 'First Floor',
        'second': 'Second Floor',
        'third': 'Third Floor'
    };
    
    mapTitle.textContent = `${buildingNames[selectedBuilding]} - ${floorNames[selectedFloor]} Evacuation Map`;
    
    // Reset selections
    resetSelections();
}

// Reset all selections and paths
function resetSelections() {
    roomMarkers.forEach(marker => marker.classList.remove('selected'));
    selectedMarker = null;
    selectedExit = null;
    currentPath = [];
    locationInfo.style.display = 'none';
    clearPath();
}

// Clear any drawn paths
function clearPath() {
    const existingPaths = document.querySelectorAll('.evacuation-path');
    existingPaths.forEach(path => path.remove());
    
    // Also clear any canvas paths
    const pathCanvas = document.getElementById('pathCanvas');
    if (pathCanvas) {
        pathCanvas.remove();
    }
    
    console.log('Cleared existing evacuation paths');
}

// Room marker click events
roomMarkers.forEach(marker => {
    marker.addEventListener('click', function() {
        // Remove previous selection
        roomMarkers.forEach(m => m.classList.remove('selected'));
        
        // Select current marker
        this.classList.add('selected');
        selectedMarker = this;
        
        // Clear any existing evacuation paths
        clearPath();
        
        // Show location info
        const roomName = this.getAttribute('data-room');
        locationInfo.innerHTML = `
            <strong>${roomName} Selected</strong><br>
            <small>Click "Show Evacuation Route" to see path to nearest exit</small>
        `;
        
        const rect = this.getBoundingClientRect();
        const containerRect = document.querySelector('.map-content').getBoundingClientRect();
        
        locationInfo.style.display = 'block';
        locationInfo.style.left = (rect.left - containerRect.left + 40) + 'px';
        locationInfo.style.top = (rect.top - containerRect.top - 10) + 'px';
        
        console.log('Room selected:', roomName);
    });
});

// Exit marker click events
exitMarkers.forEach(exit => {
    exit.addEventListener('click', function() {
        if (!selectedMarker) {
            alert('Please select a room first by clicking on a room marker');
            return;
        }
        
        selectedExit = this;
        
        // Draw evacuation path immediately
        drawEvacuationPath(selectedMarker, this);
        
        // Show route information
        const roomName = selectedMarker.getAttribute('data-room');
        const exitName = this.getAttribute('data-room');
        
        locationInfo.innerHTML = `
            <strong>ðŸŸ¡ Evacuation Route</strong><br>
            From: ${roomName}<br>
            To: ${exitName}<br>
            <small>Follow the yellow dashed line to reach the exit safely</small>
        `;
        
        // Position info box near the exit
        const rect = this.getBoundingClientRect();
        const mapRect = document.querySelector('.map-content').getBoundingClientRect();
        let leftPos = rect.left - mapRect.left + rect.width/2 - locationInfo.offsetWidth/2;
        let topPos = rect.top - mapRect.top - locationInfo.offsetHeight - 15;
        
        leftPos = Math.max(10, Math.min(leftPos, mapRect.width - locationInfo.offsetWidth - 10));
        topPos = Math.max(10, topPos);

        locationInfo.style.left = leftPos + 'px';
        locationInfo.style.top = topPos + 'px';
        locationInfo.style.display = 'block';
    });
});

// Show location information
function showLocationInfo(marker) {
    const roomName = marker.getAttribute('data-room');
    const rect = marker.getBoundingClientRect();
    const containerRect = document.querySelector('.map-content').getBoundingClientRect();
    
    locationInfo.innerHTML = `
        <strong>${roomName}</strong><br>
        <small>Click "Show Evacuation Route" to see the path to nearest exit</small>
    `;
    
    locationInfo.style.display = 'block';
    locationInfo.style.left = (rect.left - containerRect.left + 40) + 'px';
    locationInfo.style.top = (rect.top - containerRect.top - 10) + 'px';
}

// Show evacuation route
showRouteBtn.addEventListener('click', function() {
    if (!selectedMarker) {
        alert('Please select a room first by clicking on a room marker');
        return;
    }
    
    // Find nearest exit
    const nearestExit = findNearestExit(selectedMarker);
    
    if (nearestExit) {
        // Clear any existing paths first
        clearPath();
        
        // Draw the yellow dashed evacuation path
        drawEvacuationPath(selectedMarker, nearestExit);
        
        // Show detailed route instructions
        const roomName = selectedMarker.getAttribute('data-room');
        const exitName = nearestExit.getAttribute('data-room');
        
        locationInfo.innerHTML = `
            <strong>ðŸŸ¡ Evacuation Route Active</strong><br>
            <strong>From:</strong> ${roomName}<br>
            <strong>To:</strong> ${exitName}<br>
            <small>Follow the yellow dashed line on the floor plan</small>
        `;
        
        // Position info near the selected room
        const rect = selectedMarker.getBoundingClientRect();
        const mapRect = document.querySelector('.map-content').getBoundingClientRect();
        let leftPos = rect.left - mapRect.left + rect.width/2 - locationInfo.offsetWidth/2;
        let topPos = rect.top - mapRect.top - locationInfo.offsetHeight - 15;
        
        leftPos = Math.max(10, Math.min(leftPos, mapRect.width - locationInfo.offsetWidth - 10));
        topPos = Math.max(10, topPos);

        locationInfo.style.left = leftPos + 'px';
        locationInfo.style.top = topPos + 'px';
        locationInfo.style.display = 'block';
    }
});

// Find nearest exit to selected room
function findNearestExit(roomMarker) {
    let nearestExit = null;
    let shortestDistance = Infinity;
    
    const roomX = parseFloat(roomMarker.getAttribute('data-x'));
    const roomY = parseFloat(roomMarker.getAttribute('data-y'));
    
    exitMarkers.forEach(exit => {
        const exitX = parseFloat(exit.getAttribute('data-x'));
        const exitY = parseFloat(exit.getAttribute('data-y'));
        
        const distance = Math.sqrt(Math.pow(exitX - roomX, 2) + Math.pow(exitY - roomY, 2));
        
        if (distance < shortestDistance) {
            shortestDistance = distance;
            nearestExit = exit;
        }
    });
    
    return nearestExit;
}

// Draw evacuation path
function drawEvacuationPath(startMarker, endMarker) {
    clearPath();
    
    const mapContent = document.querySelector('.map-content');
    const mapRect = mapContent.getBoundingClientRect();
    const startX = parseFloat(startMarker.getAttribute('data-x'));
    const startY = parseFloat(startMarker.getAttribute('data-y'));
    const endX = parseFloat(endMarker.getAttribute('data-x'));
    const endY = parseFloat(endMarker.getAttribute('data-y'));
    
    // Create SVG overlay for the evacuation path
    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    svg.classList.add('evacuation-path');
    svg.style.position = 'absolute';
    svg.style.top = '0';
    svg.style.left = '0';
    svg.style.width = '100%';
    svg.style.height = '100%';
    svg.style.pointerEvents = 'none';
    svg.style.zIndex = '100';
    svg.setAttribute('viewBox', '0 0 100 100');
    svg.setAttribute('preserveAspectRatio', 'none');
    
    // Create glow effect path (background)
    const pathGlow = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    pathGlow.setAttribute('d', `M ${startX} ${startY} L ${endX} ${endY}`);
    pathGlow.setAttribute('stroke', '#ffeb3b');
    pathGlow.setAttribute('stroke-width', '1.5');
    pathGlow.setAttribute('stroke-dasharray', '2,1');
    pathGlow.setAttribute('fill', 'none');
    pathGlow.setAttribute('stroke-linecap', 'round');
    pathGlow.setAttribute('opacity', '0.6');
    
    // Create main yellow path
    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    path.setAttribute('d', `M ${startX} ${startY} L ${endX} ${endY}`);
    path.setAttribute('stroke', '#ffc107');
    path.setAttribute('stroke-width', '0.8');
    path.setAttribute('stroke-dasharray', '3,2');
    path.setAttribute('fill', 'none');
    path.setAttribute('stroke-linecap', 'round');
    
    // Add animation
    path.style.strokeDashoffset = '5';
    path.style.animation = 'pathAnimation 3s linear infinite';
    pathGlow.style.strokeDashoffset = '3';
    pathGlow.style.animation = 'pathAnimation 3s linear infinite reverse';
    
    // Add CSS animation if not already present
    if (!document.getElementById('pathAnimationStyle')) {
        const style = document.createElement('style');
        style.id = 'pathAnimationStyle';
        style.textContent = `
            @keyframes pathAnimation {
                from {
                    stroke-dashoffset: 0;
                }
                to {
                    stroke-dashoffset: 5;
                }
            }
        `;
        document.head.appendChild(style);
    }
    
    // Add both paths to SVG
    svg.appendChild(pathGlow);
    svg.appendChild(path);
    
    // Ensure it's added to the map content container
    mapContent.appendChild(svg);
    
    console.log('Evacuation path drawn from', startX, startY, 'to', endX, endY);
}

// Show route instructions
function showRouteInstructions(startMarker, endMarker) {
    const startRoom = startMarker.getAttribute('data-room');
    const exitName = endMarker.getAttribute('data-room');
    
    locationInfo.innerHTML = `
        <strong>Evacuation Route</strong><br>
        From: ${startRoom}<br>
        To: ${exitName}<br>
        <small>Follow the red dashed line to reach the nearest exit safely</small>
    `;
}

// Reset map view
resetMapBtn.addEventListener('click', function() {
    resetSelections();
    updateMap();
});

// Initialize map
updateMap();

// Add hover effects for markers
roomMarkers.forEach(marker => {
    marker.addEventListener('mouseenter', function() {
        if (!this.classList.contains('selected')) {
            this.style.transform = 'translate(-50%, -50%) scale(1.2)';
        }
    });
    
    marker.addEventListener('mouseleave', function() {
        if (!this.classList.contains('selected')) {
            this.style.transform = 'translate(-50%, -50%) scale(1)';
        }
    });
});

exitMarkers.forEach(marker => {
    marker.addEventListener('mouseenter', function() {
        this.style.transform = 'translate(-50%, -50%) scale(1.1)';
    });
    
    marker.addEventListener('mouseleave', function() {
        this.style.transform = 'translate(-50%, -50%) scale(1)';
    });
});

});
</script>
</body>
</html> 